==============================================================
í“¨ì–´ì›° ìŒë£Œ AI Agent - ì „ì²´ ì„¤ë¹„ì¢…í•©íš¨ìœ¨(OEE) ë¶„ì„
==============================================================

[1. ë°ì´í„° ì¡°íšŒ SQL]
----------------------------------------------------------
-- OEE 3ìš”ì†Œ ê³„ì‚°ì„ ìœ„í•œ ê¸°ì´ˆ ë°ì´í„° ì¡°íšŒ
-- 1) ê°€ìš©ë¥  ê³„ì‚°: ê³„íšì‹œê°„ ëŒ€ë¹„ ì‹¤ì œ ê°€ë™ì‹œê°„
SELECT
    l.line_id,
    l.line_name,
    8 * 60 as planned_min,  -- 1ì¼ ê³„íšì‹œê°„ (8ì‹œê°„)
    COALESCE(SUM(d.duration_min), 0) as downtime_min,
    ROUND((8*60 - COALESCE(SUM(d.duration_min), 0)) * 100.0 / (8*60), 2) as availability_rate
FROM line_mst l
LEFT JOIN downtime_event d ON l.line_id = d.line_id
    AND DATE(d.start_dt) = DATE('now')
WHERE l.line_id != 'PILOT'  -- Pilot ë¼ì¸ ì œì™¸
GROUP BY l.line_id, l.line_name;

-- 2) ì„±ëŠ¥ë¥  ê³„ì‚°: ì´ë¡ ìƒì‚°ëŸ‰ ëŒ€ë¹„ ì‹¤ì œìƒì‚°ëŸ‰
SELECT
    l.line_id,
    l.line_name,
    l.max_capacity as theoretical_capacity,
    SUM(o.qty_output) as actual_output,
    ROUND(SUM(o.qty_output) * 100.0 / l.max_capacity, 2) as performance_rate
FROM operation_exec o
JOIN mes_work_order m ON o.mes_order_id = m.mes_order_id
JOIN line_mst l ON m.line_id = l.line_id
WHERE DATE(o.end_dt) = DATE('now')
  AND l.line_id != 'PILOT'
GROUP BY l.line_id;

-- 3) í’ˆì§ˆë¥  ê³„ì‚°: ì´ìƒì‚° ëŒ€ë¹„ ì–‘í’ˆë¥ 
SELECT
    l.line_id,
    l.line_name,
    SUM(o.qty_input) as total_input,
    SUM(o.qty_output) as good_output,
    SUM(o.scrap_qty) as defect_qty,
    ROUND(SUM(o.qty_output) * 100.0 / NULLIF(SUM(o.qty_input), 0), 2) as quality_rate
FROM operation_exec o
JOIN mes_work_order m ON o.mes_order_id = m.mes_order_id
JOIN line_mst l ON m.line_id = l.line_id
WHERE DATE(o.end_dt) = DATE('now')
  AND l.line_id != 'PILOT'
GROUP BY l.line_id;

-- OEE 6ëŒ€ ì†ì‹¤ ë¶„ì„ (ì—°ê´€ ë¶„ì„ìš©)
SELECT
    CASE
        WHEN r.reason_category = 'BREAKDOWN' THEN 'ì„¤ë¹„ê³ ì¥ì†ì‹¤'
        WHEN r.reason_category = 'SETUP' THEN 'ì‘ì—…ì¤€ë¹„/ì¡°ì •ì†ì‹¤'
        WHEN r.reason_category = 'MINOR_STOP' THEN 'ì ê¹ì •ì§€ì†ì‹¤'
        WHEN r.reason_category = 'SPEED' THEN 'ì†ë„ì €í•˜ì†ì‹¤'
        WHEN r.reason_category = 'DEFECT' THEN 'ë¶ˆëŸ‰ì†ì‹¤'
        WHEN r.reason_category = 'STARTUP' THEN 'ì´ˆê¸°ìˆ˜ìœ¨ì†ì‹¤'
        ELSE 'ê¸°íƒ€ì†ì‹¤'
    END as loss_category,
    COUNT(*) as occurrence_count,
    SUM(d.duration_min) as total_loss_min
FROM downtime_event d
JOIN reason_code_mst r ON d.reason_code = r.reason_code
WHERE DATE(d.start_dt) = DATE('now')
GROUP BY r.reason_category
ORDER BY total_loss_min DESC;
----------------------------------------------------------

[2. OEE ê³„ì‚° ê¸°ì¤€]
----------------------------------------------------------
| êµ¬ë¶„ | ê³„ì‚° ê³µì‹ | í“¨ì–´ì›° ëª©í‘œ | ì„¸ê³„ìˆ˜ì¤€ |
|------|-----------|-------------|----------|
| OEE | ê°€ìš©ë¥  Ã— ì„±ëŠ¥ë¥  Ã— í’ˆì§ˆë¥  | 85% | 90% |
| ê°€ìš©ë¥  | (ê³„íšì‹œê°„-ë¹„ê°€ë™ì‹œê°„)/ê³„íšì‹œê°„ | 90% | 95% |
| ì„±ëŠ¥ë¥  | ì‹¤ì œìƒì‚°ëŸ‰/ì´ë¡ ìƒì‚°ëŸ‰ | 95% | 98% |
| í’ˆì§ˆë¥  | ì–‘í’ˆìˆ˜/ì´ìƒì‚°ìˆ˜ | 99% | 99.5% |

[6ëŒ€ ì†ì‹¤ êµ¬ì¡°]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ê°€ìš©ë¥  ì†ì‹¤        â”‚ ì„±ëŠ¥ë¥  ì†ì‹¤       â”‚ í’ˆì§ˆë¥  ì†ì‹¤    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì„¤ë¹„ê³ ì¥ì†ì‹¤    â”‚ 3. ì ê¹ì •ì§€ì†ì‹¤   â”‚ 5. ë¶ˆëŸ‰ì†ì‹¤    â”‚
â”‚ 2. ì‘ì—…ì¤€ë¹„/ì¡°ì •   â”‚ 4. ì†ë„ì €í•˜ì†ì‹¤   â”‚ 6. ì´ˆê¸°ìˆ˜ìœ¨ì†ì‹¤â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[í“¨ì–´ì›° ì„¤ë¹„ í˜„í™©]
- ì£¼ìš” ìƒì‚°ë¼ì¸: 3ê°œ (1ë¼ì¸/2ë¼ì¸/3ë¼ì¸)
- ì¼ì¼ ìµœëŒ€ ìƒì‚°ëŠ¥ë ¥: 75,000ë³‘ (Pilot ì œì™¸)
- ê³„íšê°€ë™ì‹œê°„: 8ì‹œê°„/ì¼ (480ë¶„)
----------------------------------------------------------

[3. íŒë‹¨ ê¸°ì¤€ (Threshold)]
----------------------------------------------------------
[OEE ë“±ê¸‰ ê¸°ì¤€]
- 90% ì´ìƒ: ğŸ† WORLD CLASS - ì„¸ê³„ ìµœê³  ìˆ˜ì¤€
- 85% ~ 90%: âœ… EXCELLENT - ëª©í‘œ ë‹¬ì„±, ìš°ìˆ˜
- 75% ~ 85%: âš ï¸ GOOD - ì–‘í˜¸, ê°œì„  ì—¬ì§€ ìˆìŒ
- 65% ~ 75%: ğŸ”¶ AVERAGE - í‰ê· , ê°œì„  í•„ìš”
- 65% ë¯¸ë§Œ: ğŸš¨ POOR - ì‹¬ê°í•œ ê°œì„  í•„ìš”

[3ìš”ì†Œë³„ ìµœì†Œ ê¸°ì¤€]
- ê°€ìš©ë¥  < 85%: âš ï¸ ì„¤ë¹„ë³´ì „ ì ê²€ í•„ìš”
- ì„±ëŠ¥ë¥  < 90%: âš ï¸ ë¼ì¸ë°¸ëŸ°ì‹± ì ê²€ í•„ìš”
- í’ˆì§ˆë¥  < 97%: âš ï¸ í’ˆì§ˆê´€ë¦¬ ê°•í™” í•„ìš”

[ì†ì‹¤ ì‹œê°„ ê²½ë³´ ê¸°ì¤€]
- ë‹¨ì¼ ê³ ì¥ 30ë¶„ ì´ˆê³¼: ğŸš¨ ê¸´ê¸‰ ëŒ€ì‘ í•„ìš”
- ì¼ì¼ ë¹„ê°€ë™ 60ë¶„ ì´ˆê³¼: âš ï¸ ì›ì¸ ë¶„ì„ í•„ìš”
- ì£¼ê°„ ëˆ„ì  300ë¶„ ì´ˆê³¼: ğŸ“Š ì„¤ë¹„ ì ê²€ ê³„íš ìˆ˜ë¦½
----------------------------------------------------------

[4. ì—°ê´€ ë¶„ì„ ìë™ ìˆ˜í–‰]
----------------------------------------------------------
[OEEê°€ 85% ë¯¸ë§Œì¼ ê²½ìš°]
â†’ 3ìš”ì†Œ ì¤‘ ê°€ì¥ ë‚®ì€ í•­ëª© ì›ì¸ ë¶„ì„
â†’ í•´ë‹¹ ë¼ì¸ì˜ ë¹„ê°€ë™ ì´ë ¥ ìƒì„¸ ì¡°íšŒ
â†’ ì„¤ë¹„ë³„ MTBF(í‰ê· ê³ ì¥ê°„ê²©) / MTTR(í‰ê· ìˆ˜ë¦¬ì‹œê°„) ê³„ì‚°
â†’ ì „ì¼/ì „ì£¼ ë™ì¼ ì‹œê°„ëŒ€ OEEì™€ ë¹„êµ

[ê°€ìš©ë¥ ì´ ë³‘ëª©ì¼ ê²½ìš°]
â†’ ì„¤ë¹„ë³„ ê³ ì¥ ë¹ˆë„ ë° ìœ í˜• ë¶„ì„
â†’ ì˜ˆë°©ë³´ì „ ì¼ì • ì ê²€
â†’ êµì²´ í•„ìš” ë¶€í’ˆ ì˜ˆì¸¡

[ì„±ëŠ¥ë¥ ì´ ë³‘ëª©ì¼ ê²½ìš°]
â†’ ë¼ì¸ë³„ ì‚¬ì´í´íƒ€ì„ ë¶„ì„
â†’ ì ê¹ì •ì§€(Choko-tei) ë°œìƒ íŒ¨í„´ ë¶„ì„
â†’ ì‘ì—…ìë³„ ìƒì‚°ì„± ë¹„êµ

[í’ˆì§ˆë¥ ì´ ë³‘ëª©ì¼ ê²½ìš°]
â†’ ê³µì •ë³„ ë¶ˆëŸ‰ ìœ í˜• ë¶„ì„
â†’ í’ˆì§ˆê²€ì‚¬ ê²°ê³¼ì™€ ì—°ê³„ ë¶„ì„
â†’ ì›ìì¬ LOTë³„ í’ˆì§ˆ ì¶”ì 
----------------------------------------------------------

[5. ì‘ë‹µ í˜•ì‹ ì˜ˆì‹œ]
----------------------------------------------------------
ğŸ“Š **ì „ì²´ ì„¤ë¹„ì¢…í•©íš¨ìœ¨(OEE) í˜„í™©**

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
         ğŸ¯ í˜„ì¬ OEE: **82.4%**
              ëª©í‘œ: 85% | ë‹¬ì„±ë¥ : 96.9%
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ˆ **OEE 3ìš”ì†Œ ë¶„ì„**

| êµ¬ë¶„ | í˜„ì¬ | ëª©í‘œ | ìƒíƒœ | ì†ì‹¤ì‹œê°„ |
|------|------|------|------|----------|
| ê°€ìš©ë¥  | 91.2% | 90% | âœ… | 42ë¶„ |
| ì„±ëŠ¥ë¥  | 93.5% | 95% | âš ï¸ | 31ë¶„ |
| í’ˆì§ˆë¥  | 96.7% | 99% | âš ï¸ | 16ë¶„ |

ğŸ” **ì£¼ìš” ì†ì‹¤ ìš”ì¸ (Top 3)**

1ï¸âƒ£ **ì‘ì—…ì¤€ë¹„/ì¡°ì •ì†ì‹¤** - 28ë¶„ (33%)
   - ì œí’ˆ ì „í™˜ ì‹œ CIP ì„¸ì²™ ì‹œê°„ ì¦ê°€
   - 1ë¼ì¸: í’ˆëª© ë³€ê²½ 3íšŒ (A-12 â†’ B-07 â†’ A-15)

2ï¸âƒ£ **ì†ë„ì €í•˜ì†ì‹¤** - 23ë¶„ (27%)
   - 2ë¼ì¸ ì¶©ì§„ê¸° ì†ë„ 85% ì œí•œ ìš´ì „ ì¤‘
   - ì›ì¸: ìº¡í•‘ ë¶ˆëŸ‰ ë¹ˆë°œë¡œ ì†ë„ ë‹¤ìš´

3ï¸âƒ£ **ë¶ˆëŸ‰ì†ì‹¤** - 16ë¶„ (19%)
   - 3ë¼ì¸ ì¶©ì§„ëŸ‰ í¸ì°¨ë¡œ ì¸í•œ ë¶ˆëŸ‰ 38ê±´
   - í’ˆì§ˆë¥  96.7% â†’ ëª©í‘œ 99% ë¯¸ë‹¬

ğŸ’¡ **ê°œì„  ê¶Œê³ ì‚¬í•­**

âš¡ **ì¦‰ì‹œ ì¡°ì¹˜**
- 2ë¼ì¸ ìº¡í•‘ ì„¤ë¹„ ì ê²€ ë° ì¡°ì • (ì†ë„ 100% ë³µì›)
- 3ë¼ì¸ ì¶©ì§„ ë…¸ì¦ êµì • (ì¶©ì§„ëŸ‰ í¸ì°¨ Â±1% ì´ë‚´)

ğŸ“‹ **ë‹¨ê¸° ê°œì„  (ê¸ˆì£¼ ë‚´)**
- ì œí’ˆ ì „í™˜ ì‹œ SMED ê¸°ë²• ì ìš© ê²€í† 
- CIP ì„¸ì²™ ê³µì • ìµœì í™” (í˜„ì¬ 45ë¶„ â†’ ëª©í‘œ 30ë¶„)

ğŸ“Š **ì„¤ë¹„ë³´ì „ ê¶Œê³ **
- 2ë¼ì¸ ì¶©ì§„ê¸° PM ì˜ˆì •ì¼: 12/15 â†’ ê¸ˆì£¼ ë‚´ ì•ë‹¹ê¹€ ê²€í† 
- ìº¡í•‘ í—¤ë“œ êµì²´ í•„ìš” (ì‚¬ìš©ì‹œê°„ 2,400hr ê²½ê³¼)

â° ê¸°ì¤€ì‹œì : 2024-12-08 14:30 | ë‹¤ìŒ ê°±ì‹ : 15:00
----------------------------------------------------------

[6. ì°¨íŠ¸ ë Œë”ë§ ë°ì´í„° (JSON)]
----------------------------------------------------------
{
  "chartType": "gauge",
  "title": "ì „ì²´ ì„¤ë¹„ì¢…í•©íš¨ìœ¨(OEE)",
  "config": {
    "style": "semicircle",
    "animation": true,
    "thickness": 25
  },
  "data": {
    "value": 82.4,
    "min": 0,
    "max": 100,
    "unit": "%"
  },
  "thresholds": [
    {"min": 0, "max": 65, "color": "#dc3545", "label": "POOR"},
    {"min": 65, "max": 75, "color": "#fd7e14", "label": "AVERAGE"},
    {"min": 75, "max": 85, "color": "#ffc107", "label": "GOOD"},
    {"min": 85, "max": 90, "color": "#28a745", "label": "EXCELLENT"},
    {"min": 90, "max": 100, "color": "#007bff", "label": "WORLD CLASS"}
  ],
  "target": {
    "value": 85,
    "label": "ëª©í‘œ",
    "lineStyle": "dashed",
    "color": "#000"
  },
  "subGauges": [
    {
      "label": "ê°€ìš©ë¥ ",
      "value": 91.2,
      "target": 90,
      "color": "#28a745"
    },
    {
      "label": "ì„±ëŠ¥ë¥ ",
      "value": 93.5,
      "target": 95,
      "color": "#ffc107"
    },
    {
      "label": "í’ˆì§ˆë¥ ",
      "value": 96.7,
      "target": 99,
      "color": "#ffc107"
    }
  ],
  "lossBreakdown": {
    "title": "ì†ì‹¤ êµ¬ì„±",
    "items": [
      {"category": "ì‘ì—…ì¤€ë¹„/ì¡°ì •", "minutes": 28, "percentage": 33},
      {"category": "ì†ë„ì €í•˜", "minutes": 23, "percentage": 27},
      {"category": "ë¶ˆëŸ‰", "minutes": 16, "percentage": 19},
      {"category": "ì„¤ë¹„ê³ ì¥", "minutes": 12, "percentage": 14},
      {"category": "ê¸°íƒ€", "minutes": 6, "percentage": 7}
    ]
  },
  "trendIndicator": {
    "direction": "up",
    "change": 1.8,
    "period": "ì „ì¼ ëŒ€ë¹„"
  }
}
----------------------------------------------------------

[7. ì‘ë‹µ ê·œì¹™]
----------------------------------------------------------
1. OEE ìˆ˜ì¹˜ëŠ” ì†Œìˆ˜ì  1ìë¦¬ê¹Œì§€ í‘œì‹œ
2. 3ìš”ì†Œ ëª¨ë‘ ë¶„ì„í•˜ì—¬ ë³‘ëª© ìš”ì†Œ ëª…í™•íˆ ì§€ì 
3. 6ëŒ€ ì†ì‹¤ êµ¬ì¡°ì— ë”°ë¼ ì†ì‹¤ ì›ì¸ ë¶„ë¥˜
4. ì„¤ë¹„ë³´ì „íŒ€/ìƒì‚°íŒ€/í’ˆì§ˆíŒ€ ê°ê°ì˜ ì¡°ì¹˜ì‚¬í•­ êµ¬ë¶„
5. êµ¬ì²´ì ì¸ ì„¤ë¹„ëª…ê³¼ ì†ì‹¤ ì‹œê°„ ëª…ì‹œ
6. MTBF/MTTR íŠ¸ë Œë“œ ì–¸ê¸‰í•˜ì—¬ ì˜ˆë°©ë³´ì „ ì‹œì‚¬ì  ì œê³µ
7. ëª©í‘œ OEE ë‹¬ì„±ì„ ìœ„í•œ ìš°ì„ ìˆœìœ„ ì œì•ˆ
==============================================================
